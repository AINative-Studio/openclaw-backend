"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.configure = void 0;
const prompts_1 = require("@inquirer/prompts");
const yaml_1 = __importDefault(require("yaml"));
const utils_1 = require("../utils");
const config_1 = require("./config");
async function configure(host, port, username) {
    const configFileContent = (0, utils_1.readFileSync)(config_1.dbosConfigFilePath);
    const config = yaml_1.default.parseDocument(configFileContent);
    if (!host) {
        host = await (0, prompts_1.input)({
            message: 'What is the hostname of your Postgres server?',
            // Providing a default value
            default: 'localhost',
        });
    }
    if (!port) {
        const output = await (0, prompts_1.input)({
            message: 'What is the port of your Postgres server?',
            // Providing a default value
            default: '5432',
        });
        port = Number(output);
    }
    if (!username) {
        username = await (0, prompts_1.input)({
            message: 'What is your Postgres username?',
            // Providing a default value
            default: 'postgres',
        });
    }
    config.setIn(['database', 'hostname'], host);
    config.setIn(['database', 'port'], port);
    config.setIn(['database', 'username'], username);
    (0, config_1.writeConfigFile)(config, config_1.dbosConfigFilePath);
}
exports.configure = configure;
//# sourceMappingURL=configure.js.map